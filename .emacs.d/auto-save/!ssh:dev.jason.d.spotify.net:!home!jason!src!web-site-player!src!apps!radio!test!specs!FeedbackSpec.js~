var common = require('../modules/common.js'),
    _ = require('underscore');

if (typeof SpotifyApi === 'undefined') require('./spec_helper.js');

describe('Feedback', function() {
  var Feedback, typeSpy, Observable, feedback;
  beforeEach(function() {
    common.include('../../builtMain.js');
    Feedback = SpotifyApi.api._modules['scripts/Feedback'].Feedback;
    Observable = SpotifyApi.api._modules['$api/models'].Observable;
    typeSpy = jasmine.createSpy('type').andCallFake(function(type) {
      return {name: type, schema: {}};
    });
    hermes.Schema.type = typeSpy;
    var util = require('../../scripts/util.js');
    util.buildPlaylistMosaic = jasmine.createSpy('buildPlaylistMosaic').andCallFake(function(uri, callback) {
      callback('spotify:mosaic:123:234:345:456');
    });
    feedback = Feedback(hermes, hermes.Schema, util, Observable, );
  });
});